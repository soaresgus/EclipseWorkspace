package me.ninjay.safecore.main;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.inventory.ItemStack;
import org.bukkit.inventory.ShapedRecipe;
import org.bukkit.plugin.java.JavaPlugin;

import me.ninjay.safecore.comandos.cargos.ComandoCargos;
import me.ninjay.safecore.comandos.chat.ComandoAviso;
import me.ninjay.safecore.comandos.chat.ComandoClearChat;
import me.ninjay.safecore.comandos.chat.ComandoGlobal;
import me.ninjay.safecore.comandos.chat.ComandoLocal;
import me.ninjay.safecore.comandos.chat.ComandoR;
import me.ninjay.safecore.comandos.chat.ComandoTell;
import me.ninjay.safecore.comandos.chat.ComandoToggleGlobal;
import me.ninjay.safecore.comandos.kits.ComandoKit;
import me.ninjay.safecore.comandos.lag.ComandoLag;
import me.ninjay.safecore.comandos.lag.ComandoPing;
import me.ninjay.safecore.comandos.tempo.ComandoTempoOnline;
import me.ninjay.safecore.estruturas.kits.Kits;
import me.ninjay.safecore.estruturas.kits.KitsAPI;
import me.ninjay.safecore.estruturas.kits.KitsManager;
import me.ninjay.safecore.estruturas.skills.ComandoSkills;
import me.ninjay.safecore.estruturas.skills.EventosSkills;
import me.ninjay.safecore.estruturas.skills.EventosSkillsHab;
import me.ninjay.safecore.estruturas.skills.EventosSkillsUp;
import me.ninjay.safecore.estruturas.skills.SkillsAPI;
import me.ninjay.safecore.estruturas.tags.Tags;
import me.ninjay.safecore.estruturas.tags.TagsAPI;
import me.ninjay.safecore.estruturas.tags.TagsManager;
import me.ninjay.safecore.eventos.EventosGeral;
import me.ninjay.safecore.utils.BukkitConfig;
import me.ninjay.safecore.utils.Mine;
import me.ninjay.utils.utils.StorageAPI;

public class Main extends JavaPlugin {

	public static BukkitConfig config;
	public static Main instance;
	public static ItemStack cajado = Mine.newItem(Material.BLAZE_ROD, "§bCajado de feiticeiro", 1, 0, " "," §7Clique com o direito para acessar o menu.");

	@Override
	public void onEnable() {

		instance = this;

		getCommand("g").setExecutor(new ComandoGlobal());
		getCommand("l").setExecutor(new ComandoLocal());
		getCommand("clearchat").setExecutor(new ComandoClearChat());
		getCommand("toggleglobal").setExecutor(new ComandoToggleGlobal());
		getCommand("aviso").setExecutor(new ComandoAviso());
		getCommand("tell").setExecutor(new ComandoTell());
		getCommand("r").setExecutor(new ComandoR());
		getCommand("ping").setExecutor(new ComandoPing());
		getCommand("lag").setExecutor(new ComandoLag());
		getCommand("cargo").setExecutor(new ComandoCargos());
		getCommand("kit").setExecutor(new ComandoKit());
		getCommand("tempoonline").setExecutor(new ComandoTempoOnline());
		getCommand("skills").setExecutor(new ComandoSkills());

		Bukkit.getPluginManager().registerEvents(new EventosGeral(), this);
		Bukkit.getPluginManager().registerEvents(new ComandoLocal(), this);
		Bukkit.getPluginManager().registerEvents(new ComandoLag(), this);
		Bukkit.getPluginManager().registerEvents(new ComandoKit(), this);
		Bukkit.getPluginManager().registerEvents(new EventosSkills(), this);
		Bukkit.getPluginManager().registerEvents(new EventosSkillsUp(), this);
		Bukkit.getPluginManager().registerEvents(new EventosSkillsHab(), this);

		Mine.console("§6[SafeCore] §2Core iniciada com sucesso!");

		StorageAPI.register(Tags.class);
		StorageAPI.register(TagsManager.class);

		StorageAPI.register(Kits.class);
		StorageAPI.register(KitsManager.class);

		KitsAPI.reload();
		TagsAPI.reload();

		config = new BukkitConfig("config.yml", this);
		config.saveDefaultConfig();
		config.saveConfig();
		
		SkillsAPI.skills.saveDefaultConfig();
		
		ShapedRecipe expBottle = new ShapedRecipe(cajado);
		 
		expBottle.shape("*%*","%B%","*%*");
		 
		expBottle.setIngredient('A', Material.APPLE, 2);
		expBottle.setIngredient('B', Material.SUGAR);
		expBottle.setIngredient('C', Material.GLASS_BOTTLE);
		 
		getServer().addRecipe(expBottle);

	}
	public static Main getInstance() {
		return instance;
	}

}
