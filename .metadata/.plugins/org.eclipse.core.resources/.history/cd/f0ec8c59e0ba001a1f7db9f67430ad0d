package me.ninjay.safemina.main;

import java.io.File;

import org.bukkit.Bukkit;
import org.bukkit.World;
import org.bukkit.WorldCreator;
import org.bukkit.entity.Player;
import org.bukkit.plugin.java.JavaPlugin;

import com.onarandombox.MultiverseCore.utils.FileUtils;

import me.ninjay.safemina.comandos.ComandoEscavar;
import me.ninjay.safemina.utils.BukkitConfig;

public class Main extends JavaPlugin{
	
	public static BukkitConfig config;
	
	@Override
	public void onEnable() {
		getCommand("escavar").setExecutor(new ComandoEscavar());
		
		config = new BukkitConfig("config.yml", this);
		config.saveDefaultConfig();
		
		Bukkit.getServer().createWorld(new WorldCreator("escavar"));
		
        World world = Bukkit.getWorld("escavar");
        world.setKeepSpawnInMemory(false);
        Bukkit.unloadWorld(world, false);
        world.getWorldFolder().delete();

        final File src = new File(Bukkit.getWorldContainer() + File.separator + world.getName());
        FileUtils.deleteFolder(src);
            Bukkit.getServer().createWorld(new WorldCreator("escavar"));
	}

}
